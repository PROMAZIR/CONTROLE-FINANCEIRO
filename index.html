<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="tema-escuro">
    <div class="app-container">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-wallet"></i> FinControl</h2>
            </div>
            <div class="sidebar-menu">
                <div class="menu-item active" data-page="dashboard">
                    <i class="fas fa-chart-pie"></i> Dashboard
                </div>
                <div class="menu-item" data-page="novo-lancamento">
                    <i class="fas fa-plus-circle"></i> Novo Lançamento
                </div>
                <div class="menu-item" data-page="relatorios">
                    <i class="fas fa-chart-bar"></i> Relatórios
                </div>
                <div class="menu-item" data-page="configuracoes">
                    <i class="fas fa-cog"></i> Configurações
                </div>
            </div>
            <div class="sidebar-footer">
                <p>v1.0.0 - Desenvolvido com ❤️</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="top-bar">
                <button id="toggleSidebar" class="toggle-btn">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="user-info">
                    <span id="dataAtual"></span>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="container">
                    <h1>Dashboard Financeiro</h1>
                    <div id="painelResumo" class="resumo">
                        <div class="resumo-item">
                            <span>Recebido:</span> <span>R$ 0,00</span>
                        </div>
                        <div class="resumo-item">
                            <span>Gasto:</span> <span>R$ 0,00</span>
                        </div>
                        <div class="resumo-item">
                            <span>Saldo:</span> <span>R$ 0,00</span>
                        </div>
                    </div>
                    <div class="historico">
                        <h2>Histórico de Transações</h2>
                        <div class="table-responsive">
                            <table class="tabela">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Tipo</th>
                                        <th>Valor</th>
                                        <th>Descrição</th>
                                        <th>Categoria</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="tabela-registros">
                                    <tr>
                                        <td colspan="6">Carregando registros...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Novo Lançamento Page -->
            <div id="novo-lancamento" class="page">
                <div class="container">
                    <h1>Novo Lançamento</h1>
                    <div class="form-container">
                        <div class="form-group">
                            <label for="tipoTransacao">Tipo de Transação</label>
                            <select id="tipoTransacao" class="form-control">
                                <option value="Receita">Receita</option>
                                <option value="Gasto">Gasto</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="valor">Valor (R$)</label>
                            <input type="text" id="valor" class="form-control" placeholder="0,00">
                        </div>
                        <div class="form-group">
                            <label for="descricao">Descrição</label>
                            <input type="text" id="descricao" class="form-control" placeholder="Ex: Compra de supermercado">
                        </div>
                        <div class="form-group">
                            <label for="categoria">Categoria</label>
                            <select id="categoria" class="form-control">
                                <!-- Categorias serão carregadas dinamicamente -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dataTransacao">Data</label>
                            <input type="date" id="dataTransacao" class="form-control">
                        </div>
                        <div class="form-group">
                            <button id="btnRegistrar" class="btn btn-primary" onclick="enviar()">
                                <i class="fas fa-save"></i> Registrar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Relatórios Page -->
            <div id="relatorios" class="page">
                <div class="container">
                    <h1>Relatórios</h1>
                    <div class="tabs">
                        <button class="tab-button active" onclick="changeTab('tab-graficos')">Gráficos</button>
                        <button class="tab-button" onclick="changeTab('tab-resumo-mensal')">Resumo Mensal</button>
                        <button class="tab-button" onclick="changeTab('tab-categorias')">Análise por Categorias</button>
                    </div>
                    
                    <div id="tab-graficos" class="tab-content active">
                        <div class="chart-container">
                            <canvas id="chartGastosCategorias"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="chartEvolucaoMensal"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="chartReceitasDespesas"></canvas>
                        </div>
                    </div>
                    
                    <div id="tab-resumo-mensal" class="tab-content">
                        <div class="resumo-mensal" id="resumoMensal">
                            <p>Carregando dados...</p>
                        </div>
                    </div>
                    
                    <div id="tab-categorias" class="tab-content">
                        <div class="analise-categorias" id="analiseCategorias">
                            <p>Carregando dados...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configurações Page -->
            <div id="configuracoes" class="page">
                <div class="container">
                    <h1>Configurações</h1>
                    
                    <div class="config-section">
                        <h2>Personalização</h2>
                        <div class="form-group">
                            <label for="primaryColor">Cor Principal</label>
                            <input type="color" id="primaryColor" value="#1976d2" onchange="updateThemeColor('primary-color', this.value)">
                        </div>
                        <div class="form-group">
                            <label for="secondaryColor">Cor Secundária</label>
                            <input type="color" id="secondaryColor" value="#424242" onchange="updateThemeColor('secondary-color', this.value)">
                        </div>
                        <div class="form-group">
                            <label for="accentColor">Cor de Destaque</label>
                            <input type="color" id="accentColor" value="#1de9b6" onchange="updateThemeColor('accent-color', this.value)">
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h2>Gerenciar Categorias</h2>
                        <div class="form-group">
                            <input type="text" id="novaCategoria" class="form-control" placeholder="Nova categoria">
                            <button class="btn btn-primary" onclick="adicionarCategoria()">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                        <div id="listaCategorias" class="lista-categorias">
                            <!-- Categorias serão carregadas dinamicamente -->
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h2>Importar/Exportar Dados</h2>
                        <div class="form-group">
                            <button class="btn btn-primary" onclick="exportarDados()">
                                <i class="fas fa-download"></i> Exportar Dados
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="importarArquivo">Importar Dados</label>
                            <input type="file" id="importarArquivo" class="form-control">
                            <button class="btn btn-primary" onclick="importarDados()">
                                <i class="fas fa-upload"></i> Importar
                            </button>
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h2>Configuração da API</h2>
                        <div class="form-group">
                            <label for="apiUrl">URL da API (Google Apps Script)</label>
                            <input type="text" id="apiUrl" class="form-control" placeholder="https://script.google.com/macros/s/...">
                            <button class="btn btn-primary" onclick="salvarUrlApi()">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para visualização de comprovantes -->
    <div id="modalComprovante" class="modal">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('modalComprovante').style.display='none'">&times;</span>
            <div id="comprovanteModal"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>
